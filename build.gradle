buildscript {
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$KOTLIN_VERSION"
    }
}

plugins {
    id "org.jetbrains.intellij" version "0.1.9"
    id "com.zoltu.git-versioning" version "2.0.28"
}

apply plugin: 'java'
apply plugin: 'kotlin'

sourceCompatibility = JAVA_VERSION

repositories {
    jcenter()
}

dependencies {
    compile "org.jetbrains.kotlin:kotlin-runtime:$KOTLIN_VERSION"
    compile "org.jetbrains.kotlin:kotlin-stdlib:$KOTLIN_VERSION"
    testCompile "org.assertj:assertj-core:2.2.0"
}

intellij {
    type = 'IU'
    version = INTELLIJ_VERSION
    downloadSources Boolean.valueOf(INTELLIJ_DOWNLOAD_SOURCES)

    pluginName = 'Ember.js'
    plugins = ['JavaScriptLanguage', 'com.dmarcotte.handlebars:145.9']
    updateSinceUntilBuild = false

    sandboxDirectory = project.rootDir.canonicalPath + "/.sandbox"

    publish {
        pluginId '8049'
        username "$JETBRAINS_USERNAME"
        password "$JETBRAINS_PASSWORD"
    }
}

test {
    testLogging {
        exceptionFormat = 'full'
    }
}
